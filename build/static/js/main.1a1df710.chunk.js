(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(13),c=n.n(u),o=n(2),l=function(e){var t=e.filterStr,n=e.filterData;return r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{value:t,onChange:n,type:"text"}))},i=function(e){var t=e.handleSubmitForm,n=e.newName,a=e.setNewName,u=e.newNumber,c=e.setNewNumber;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:n,onChange:function(e){return a(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:u,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},m=function(e){var t=e.name,n=e.number,a=e.deletePerson;return r.a.createElement("li",null,t," ",n," ",r.a.createElement("button",{onClick:a},"delete"))},f=function(e){var t=e.matchPersons,n=e.deletePerson;return r.a.createElement("ul",null,t.map((function(e){return r.a.createElement(m,{key:e.name,name:e.name,number:e.number,deletePerson:function(){return n(e.id)}})})))},s=function(e){var t=e.message,n=e.flag;if(null===t)return null;var a="success"===n?{color:"green"}:{color:"red"};return r.a.createElement("div",{style:a,className:"success"},t)},d=n(3),b=n.n(d),h="/api/persons",p=function(){return b.a.get(h).then((function(e){return e.data}))},v=function(e){return b.a.post(h,e).then((function(e){return e.data}))},E=function(e){return b.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},w=function(e,t){return b.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))},N=(n(37),function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)(""),m=Object(o.a)(c,2),d=m[0],b=m[1],h=Object(a.useState)(""),N=Object(o.a)(h,2),g=N[0],j=N[1],O=Object(a.useState)(""),S=Object(o.a)(O,2),k=S[0],y=S[1],P=Object(a.useState)(null),C=Object(o.a)(P,2),D=C[0],T=C[1],x=Object(a.useState)("success"),F=Object(o.a)(x,2),J=F[0],U=F[1];Object(a.useEffect)((function(){p().then((function(e){u(e)}))}),[]);var B=n.filter((function(e){return e.name.toUpperCase().includes(k.toUpperCase())}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(s,{message:D,flag:J}),r.a.createElement(l,{filterStr:k,filterData:function(e){y(e.target.value)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(i,{handleSubmitForm:function(e){e.preventDefault();var t={name:d,number:g};if(n.map((function(e){return e.name})).includes(d)){var a=n.filter((function(e){return e.name===d}))[0],r=a.id,c=a.name;return window.confirm("".concat(c," is already added to phonebook, replace the old number with a new one?"))&&w(r,t).then((function(e){T("".concat(d," number is updated")),setTimeout((function(){T(null)}),5e3),u(n.map((function(t){return t.id!==r?t:e})))})).catch((function(e){U("error"),T("information of ".concat(d," has already been removed from the server")),setTimeout((function(){T(null),U("success")}),5e3),u(n.filter((function(e){return e.id!==r})))})),b(""),void j("")}v(t).then((function(e){T("added ".concat(e.name)),setTimeout((function(){T(null)}),5e3),u(n.concat(e)),b(""),j("")}))},newName:d,setNewName:b,newNumber:g,setNewNumber:j}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(f,{matchPersons:B,deletePerson:function(e){var t=n.filter((function(t){return t.id===e}));window.confirm("delete ".concat(t[0].name,"?"))&&E(e).then((function(){u(n.filter((function(t){return t.id!==e})))}))}}))});c.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.1a1df710.chunk.js.map